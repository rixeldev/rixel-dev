---
import { footerLinks } from "@/libs/consts"
import { getActiveLocale, getI18N, resolveLocalizedPath } from "@/locales/index"
import Divider from "./Divider.astro"

interface Props {
	locale?: string
}

const { locale: forcedLocale } = Astro.props as Props
const locale = forcedLocale ?? getActiveLocale(Astro)
const i18n = getI18N({ currentLocale: locale })
const links = footerLinks()
const privacyHref = new URL(resolveLocalizedPath("/privacy/"), "https://rixel.dev").toString()
const termsHref = new URL(resolveLocalizedPath("/terms/"), "https://rixel.dev").toString()
---

<footer
	class="relative flex w-full items-center justify-center bg-gradient-to-b from-transparent via-slate-900 to-transparent py-12 shadow-2xl shadow-black/50 backdrop-blur-sm"
>
	<div
		class="absolute inset-0 bg-[radial-gradient(ellipse_at_bottom,rgba(8,145,178,0.1),transparent_70%)]"
	>
	</div>
	<div
		class="relative z-10 flex w-full max-w-4xl flex-col px-4 sm:w-11/12 sm:px-6 md:w-8/12 lg:px-8"
	>
		<Divider />

		<div
			class="flex w-full flex-col-reverse items-center gap-6 md:justify-between md:gap-4 lg:flex-row lg:items-center"
		>
			<a
				href="https://rixel.dev/"
				class="order-1 flex max-w-16 items-center justify-center transition-all duration-300 hover:scale-110 lg:order-none"
			>
				<img
					src="/brand-svg.svg"
					class="w-full drop-shadow-lg"
					alt="Logo Rixel"
					loading="lazy"
					decoding="async"
				/>
			</a>
			<p class="max-w-md text-pretty text-center text-sm text-primary/90 lg:text-start">
				&#169; {new Date().getFullYear()} RixelDev.<br />
				{i18n.FOOTER_TXT_1}
				<a
					rel="noopener noreferrer"
					href="https://rixel.dev"
					class="font-bold text-accent transition-all duration-300 active:text-accent/80 active:underline sm:hover:text-accent/80 sm:hover:underline"
					>RixelDev</a
				>
				(Rikelvi Capellán García) {i18n.FOOTER_TXT_2}
				<a
					rel="noopener noreferrer"
					href="https://astro.build"
					target="_blank"
					class="font-bold text-accent transition-all duration-300 active:text-accent/80 active:underline sm:hover:text-accent/80 sm:hover:underline"
					>Astro</a
				>, <a
					rel="noopener noreferrer"
					href="https://tailwindcss.com"
					target="_blank"
					class="font-bold text-accent transition-all duration-300 active:text-accent/80 active:underline sm:hover:text-accent/80 sm:hover:underline"
					>Tailwind CSS</a
				>
				{i18n.FOOTER_TXT_3}
				<a
					rel="noopener noreferrer"
					href="https://vercel.com"
					target="_blank"
					class="font-bold text-accent transition-all duration-300 active:text-accent/80 active:underline sm:hover:text-accent/80 sm:hover:underline"
					>Vercel</a
				>.
			</p>

			<ul class="flex flex-row items-center gap-x-4">
				{
					links.map((link) => (
						<li>
							<a
								target="_blank"
								href={link.href}
								rel="noopener noreferrer"
								class="group relative inline-flex size-10 items-center justify-center rounded-xl bg-gradient-to-br from-primary/15 to-primary/10 text-secondary transition-all duration-300 hover:scale-110 hover:bg-gradient-to-br hover:from-accent/25 hover:to-accent/15 hover:text-accent hover:shadow-md hover:shadow-accent/20 active:scale-95 motion-safe:transition motion-reduce:hover:scale-100"
							>
								<link.icon class="size-5 motion-reduce:duration-0" />
							</a>
						</li>
					))
				}
			</ul>
		</div>

		<Divider />

		<div class="w-full">
			<ul class="flex w-full flex-row items-center justify-center gap-x-4">
				<li>
					<a
						href={privacyHref}
						rel="noopener noreferrer"
						target="_blank"
						class="rounded-lg px-3 py-1.5 text-sm text-secondary/70 transition-all duration-300 hover:bg-primary/10 hover:text-accent hover:shadow-sm"
						>{i18n.PRIVACY}</a
					>
				</li>
				<li class="text-sm text-secondary/40">|</li>
				<li>
					<a
						href={termsHref}
						rel="noopener noreferrer"
						target="_blank"
						class="rounded-lg px-3 py-1.5 text-sm text-secondary/70 transition-all duration-300 hover:bg-primary/10 hover:text-accent hover:shadow-sm"
						>{i18n.TERMS}</a
					>
				</li>
			</ul>
		</div>
	</div>
</footer>
