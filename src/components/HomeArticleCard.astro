---
import RightArrow from "@/icons/RightArrow.astro"
import { getActiveLocale, getI18N, resolveLocalizedHref } from "@/languages/index"

interface Props {
	author: string
	description: string
	lang: string
	pageTitle: string
	timestamp: string
	title: string
}

const locale = getActiveLocale(Astro)
const i18n = getI18N({ currentLocale: locale })
const { author, description, lang, pageTitle, timestamp, title } = Astro.props
const articleHref = resolveLocalizedHref(`/articles/${pageTitle}`, locale)
---

<a
	href={articleHref}
	data-story-id={pageTitle}
	title={`${i18n.READ} â†’ ${title}`}
	class='group relative flex w-full items-center justify-between gap-4 overflow-hidden rounded-2xl bg-gradient-to-br from-primary/5 to-primary/10 px-5 py-4 shadow-sm backdrop-blur-sm transition-all duration-300 ease-in-out active:scale-[0.98] active:shadow-lg sm:cursor-pointer sm:hover:scale-[0.98] sm:hover:border-accent/20 sm:hover:bg-gradient-to-br sm:hover:from-accent/10 sm:hover:to-primary/15 sm:hover:shadow-lg sm:hover:shadow-accent/5 dark:border-primary/20 dark:bg-gradient-to-br dark:from-primary/10 dark:to-primary/5 dark:sm:hover:border-accent/30 dark:sm:hover:from-accent/15 dark:sm:hover:to-primary/20'
>
	<div class='flex-1 overflow-hidden'>
		<h1
			class='text-base font-bold text-accent transition-colors duration-300 sm:text-lg sm:group-hover:text-accent/90'
			transition:name={`article-${pageTitle}-title`}
		>
			{title}
		</h1>

		<h2
			class='mt-1 overflow-hidden text-ellipsis whitespace-nowrap text-nowrap text-xs text-primary transition-colors duration-300 sm:text-sm sm:group-hover:text-primary/90'
			transition:name={`article-${pageTitle}-content`}
		>
			{description}
		</h2>

		<div class='mt-3 flex flex-col gap-1'>
			<p
				class='text-[10px] italic text-secondary/80 transition-colors duration-300 sm:text-xs sm:group-hover:text-secondary'
			>
				{timestamp}
			</p>

			<p
				class='text-[10px] italic text-secondary/80 transition-colors duration-300 sm:text-xs sm:group-hover:text-secondary'
			>
				{i18n.AUTHOR}: {author} | {i18n.LANGUAGE}: {lang}
			</p>
		</div>
	</div>

	<div class='flex-shrink-0'>
		<RightArrow
			class='size-8 text-primary transition-all duration-300 sm:group-hover:translate-x-1 sm:group-hover:text-accent'
		/>
	</div>
</a>
