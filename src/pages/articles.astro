---
import ArticleCard from "@/components/ArticleCard.astro"
import MainTitle from "@/components/MainTitle.astro"
import SectionContainer from "@/components/SectionContainer.astro"
import Book from "@/icons/Book.astro"
import { getActiveLocale, getI18N, resolveLocalizedPath } from "@/locales/index"
import { getCollection } from "astro:content"
import Layout from "../layouts/Layout.astro"

const locale = getActiveLocale(Astro)
const i18n = getI18N({ currentLocale: locale })
const articles = (await getCollection("articles")).slice(0, 4)
---

<Layout
	title={`${i18n.ARTICLES} - Rixel`}
	description={i18n.ARTICLES_PAGE_DESCRIPTION}
	canonical={new URL(resolveLocalizedPath("/articles/", locale), "https://rixel.dev").toString()}
>
	<SectionContainer>
		<div class="flex w-full max-w-4xl flex-col gap-2 sm:w-11/12 md:w-8/12">
			<MainTitle>
				<Book class="size-8" />
				{i18n.ARTICLES}
			</MainTitle>
		</div>

		<div class="flex w-full max-w-4xl flex-col gap-14 sm:w-11/12 md:w-8/12">
			{
				articles.map((article) => {
					const { data } = article
					const { cover, description, pageTitle, tags, title } = data

					return (
						<ArticleCard
							cover={cover}
							description={description}
							pageTitle={pageTitle}
							tags={tags}
							title={title}
						/>
					)
				})
			}
		</div>
	</SectionContainer>
</Layout>
