---
import ArticleCard from "@/components/ArticleCard.astro"
import MainTitle from "@/components/MainTitle.astro"
import SectionContainer from "@/components/SectionContainer.astro"
import Book from "@/icons/Book.astro"
import { getActiveLocale, getI18N, resolveLocalizedPath } from "@/languages/index"
import { articlesService } from "@/services/articles"
import Layout from "../layouts/Layout.astro"

const locale = getActiveLocale(Astro)
const i18n = getI18N({ currentLocale: locale })
const articles = articlesService()
---

<Layout
	title={`${i18n.ARTICLES} - Capelix`}
	description={i18n.ARTICLES_PAGE_DESCRIPTION}
	canonical={new URL(resolveLocalizedPath('/articles/', locale), 'https://capelix.dev').toString()}
>
	<SectionContainer>
		<div class='flex w-full max-w-4xl flex-col gap-2 sm:w-11/12 md:w-8/12'>
			<MainTitle>
				<Book class='size-8' />
				{i18n.ARTICLES}
			</MainTitle>
		</div>

		<div class='flex w-full max-w-4xl flex-col gap-14 sm:w-11/12 md:w-8/12'>
			{articles.map((article) => <ArticleCard {...article} />)}
		</div>
	</SectionContainer>
</Layout>
